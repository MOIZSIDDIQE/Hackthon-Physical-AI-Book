---
title: 3.3 Locomotion and Gait Planning Diagrams and Case Study
sidebar_position: 8
---

# 3.3 Locomotion and Gait Planning Diagrams and Case Study

## Learning Objectives
- Visualize key locomotion and gait planning concepts through diagrams and illustrations
- Understand practical applications of gait planning in humanoid robots
- Analyze real-world case studies of locomotion implementation
- Apply gait planning diagrams to solve practical robotics problems

## Introduction

This section provides visual representations of key locomotion and gait planning concepts and practical case studies that demonstrate how gait planning systems are implemented in real humanoid robots. Understanding these visualizations is crucial for developing intuition about complex walking patterns and their practical implementation in real-world systems.

## 1. Gait Planning Architecture Diagrams

### Walking Control Architecture

The locomotion system of a humanoid robot typically implements a multi-layered control architecture to manage walking, balance, and gait planning:

**Diagram**: ![Diagram Placeholder](/img/placeholder.png)

```
High-Level Gait Planning:
├── Step Sequence: [Step 1] → [Step 2] → [Step 3] → [Step N]
├── Gait Parameters: [Step Length] [Step Width] [Step Time]
├── Balance Strategy: [ZMP Planning] [Capture Point]
└── Terrain Adaptation: [Obstacle Avoidance] [Surface Classification]

Mid-Level Control:
├── Footstep Planning: [A* Search] [RRT-based Planning]
├── CoM Trajectory: [Inverted Pendulum Model]
├── Balance Control: [Feedback Correction] [Feedforward Control]
└── Timing Control: [Phase Synchronization]

Low-Level Control:
├── Joint Control: [Trajectory Tracking] [Impedance Control]
├── Contact Control: [Force Regulation] [Impact Management]
└── State Estimation: [IMU Fusion] [Kinematic Feedback]
```

### Bipedal Walking Phases Visualization

**Diagram**: ![Diagram Placeholder](/img/placeholder.png)

```
Complete Gait Cycle:
Left Stance Phase: [Left Foot Support] [Right Foot Swing]
     ↓
Double Support: [Both Feet Contact] [Weight Transfer]
     ↓
Right Stance Phase: [Right Foot Support] [Left Foot Swing]
     ↓
Double Support: [Both Feet Contact] [Weight Transfer]

Support Polygon Dynamics:
Single Support: [Support Foot Only] → [Small Polygon]
     ↓
Double Support: [Both Feet] → [Large Polygon] → [Max Stability]
     ↓
Transition: [Foot Lift] [Foot Placement] → [Balance Adjustment]

Timing Profile:
Stance Phase: ████████████ (70% of gait cycle)
Swing Phase:  ████████ (30% of gait cycle)
Double Support: ████ (10-15% at transitions)
```

## 2. Balance Control System Diagrams

### Zero Moment Point (ZMP) Control Architecture

**Diagram**: ![Diagram Placeholder](/img/placeholder.png)

```
ZMP-Based Balance Control System:
Perception Input: [IMU] [Force Sensors] [Encoders] [Vision]
     ↓
State Estimation: [CoM Position] [CoM Velocity] [ZMP Calculation]
     ↓
ZMP Reference Generation: [Desired ZMP Trajectory] [Support Polygon]
     ↓
ZMP Controller: [Feedback Control] + [Feedforward Compensation]
     ↓
CoM Trajectory Generation: [CoM Reference] [Acceleration Commands]
     ↓
Whole-Body Controller: [Joint Commands] → [Motor Outputs]

ZMP Control Loop:
CoM Measurement → [Error] → [ZMP Controller] → [Correction] → Robot Response
       ↑                                                    ↓
       └─────────────────────────────────────────────────────┘

Stability Criteria:
├── ZMP ∈ Support_Polygon: Stable walking
├── ZMP Margin: Distance from polygon edge
└── Capture Point: Location for balance recovery
```

### Center of Mass Control Visualization

**Diagram**: ![Diagram Placeholder](/img/placeholder.png)

```
CoM Trajectory Planning:
3D CoM Path: [X(t), Y(t), Z(t)] trajectory
├── Lateral Movement: Y-axis CoM sway for balance
├── Forward Movement: X-axis progression with walking
└── Vertical Movement: Z-axis maintenance or adjustment

CoM Reference Generation:
├── Desired Trajectory: Smooth, continuous path
├── Constraints: [Stability] [Joint Limits] [Actuator Bounds]
├── Optimization: Minimize energy, maximize stability
└── Feedback Integration: Real-time corrections

Inverted Pendulum Model:
CoM Height (h) ──○
                |
                | (CoM Position)
                |
Ground Level ────●─────────────────────────────────●───
                Left Foot                    Right Foot

CoM Motion: ẍ_com = g/h × (x_com - zmp)
Stability: ZMP ∈ Support_Polygon
```

## 3. Footstep Planning Visualization

### A* Footstep Planning Process

**Diagram**: ![Diagram Placeholder](/img/placeholder.png)

```
Grid-Based Footstep Planning:
Environment: [Obstacles] [Terrain Types] [Safe Regions]
     ↓
Grid Generation: [2D Grid] [Cost Map] [Connectivity]
     ↓
A* Search: [Start Foot Position] → [Goal Foot Position]
     ↓
Path Optimization: [Step Sequence] [Timing Information]

A* Algorithm Steps:
Initial: [Start Node] [Goal Node] [Cost Map]
     ↓
Iteration 1: [Expand Neighbors] [Calculate Costs]
     ↓
Iteration 2: [Update Heuristic] [Select Next Node]
     ↓
Continue: [Path Found] → [Step Sequence Extracted]

Cost Function Components:
├── Step Length: Distance between consecutive steps
├── Step Width: Lateral distance between feet
├── Terrain Cost: Obstacle avoidance, terrain difficulty
├── Balance Cost: Stability during step execution
└── Energy Cost: Minimize walking energy consumption
```

### Footstep Sequence Planning

**Diagram**: ![Diagram Placeholder](/img/placeholder.png)

```
Sequential Footstep Planning:
Initial State: [Left Foot] ●─────────────────────● [Right Foot]
     ↓
Step 1: Lift Right Foot → [Swing Phase] → [Place Right Foot]
     ↓
Step 2: Lift Left Foot → [Swing Phase] → [Place Left Foot]
     ↓
Continue: [Alternating Pattern] → [Forward Progression]

Step Planning Constraints:
├── Step Limits: [Max Length] [Min Length] [Width Range]
├── Turning Constraints: [Rotation Limits] [Angular Steps]
├── Obstacle Constraints: [Clearance] [Safe Placement]
└── Balance Constraints: [Support Polygon] [Stability Margin]

Timing Synchronization:
Left Foot: ●─────────●─────────●─────────●─────────●
Right Foot: ─●─────────●─────────●─────────●─────────●
     ↓
Support Phases: [Single] [Double] [Single] [Double] [Single]
```

## 4. Real-World Case Study: Honda ASIMO Gait Planning

### Case Study: Honda ASIMO Advanced Walking Control System

The ASIMO humanoid robot demonstrates sophisticated gait planning and locomotion control for human-like walking patterns:

**Diagram**: ![Diagram Placeholder](/img/placeholder.png)

```
ASIMO Walking Control Architecture:
┌─────────────────────────────────────────────────────────────────┐
│                    HIGH-LEVEL GAIT PLANNING                      │
├─────────────────────────────────────────────────────────────────┤
│ Gait Selection: [Slow Walk] [Normal Walk] [Fast Walk] [Run]    │
│ Step Planning: [Foot Placement] [Timing] [Trajectory]          │
│ Balance Planning: [ZMP Trajectory] [CoM Control]               │
│ Terrain Adaptation: [Surface Recognition] [Gait Adjustment]    │
└─────────────────────────────────────────────────────────────────┘
                ↓
┌─────────────────────────────────────────────────────────────────┐
│                   BALANCE CONTROL SYSTEM                        │
├─────────────────────────────────────────────────────────────────┤
│ ZMP Controller: [Real-time ZMP tracking] [Feedback control]    │
│ CoM Controller: [Inverted pendulum model] [Capture point]      │
│ Posture Controller: [Upper body stabilization] [Arm swing]     │
│ State Estimator: [Kalman filter] [Sensor fusion]               │
└─────────────────────────────────────────────────────────────────┘
                ↓
┌─────────────────────────────────────────────────────────────────┐
│                    JOINT CONTROL SYSTEM                         │
├─────────────────────────────────────────────────────────────────┤
│ Trajectory Generation: [Joint angles] [Velocities] [Torques]   │
│ Feedforward Control: [Pre-planned motions] [Anticipatory]      │
│ Feedback Control: [Real-time corrections] [Disturbance rejection]│
│ Safety Systems: [Fall detection] [Emergency stops]             │
└─────────────────────────────────────────────────────────────────┘
```

#### Multi-Step Gait Planning in ASIMO

```
ASIMO Gait Planning Process:
Step Recognition: [Human Walking] → [Gait Pattern Matching]
     ↓
Parameter Extraction: [Step Length] [Step Time] [Cadence]
     ↓
Gait Adaptation: [Speed Adjustment] [Stability Enhancement]
     ↓
Trajectory Generation: [CoM Path] [Foot Trajectories] [Timing]
     ↓
Control Execution: [Joint Commands] → [Physical Walking]

Performance Characteristics:
├── Walking Speed: 1.6 km/h (normal), 6 km/h (running)
├── Step Length: 0.3 m (normal), 0.6 m (fast)
├── Step Frequency: 1.8 Hz (normal), 2.5 Hz (fast)
├── Balance: < 2 cm CoM deviation during walking
└── Turning: 15-degree steps, 360-degree rotation capability

Adaptive Features:
├── Stair Climbing: Automatic recognition and gait adaptation
├── Slope Walking: Inclination detection and adjustment
├── Obstacle Negotiation: Real-time footstep replanning
└── Human Following: Adaptive gait matching human walking
```

#### ASIMO Walking Performance Metrics

**Diagram**: ![Diagram Placeholder](/img/placeholder.png)

```
Walking Performance Analysis:
Stability Metrics:
├── ZMP Tracking: < 2 cm error during steady walking
├── CoM Deviation: < 3 cm from reference trajectory
├── Step Placement: < 1 cm accuracy
└── Balance Recovery: < 0.5 sec response to disturbances

Efficiency Metrics:
├── Energy Consumption: 12 W average during walking
├── Control Frequency: 200 Hz balance control, 1 kHz joint control
├── Computational Load: < 10 ms per control cycle
└── Real-time Performance: < 1% CPU utilization

Terrain Adaptation:
├── Flat Ground: Stable 6 km/h running capability
├── Uneven Terrain: Automatic step height adjustment
├── Stairs: Recognition and climbing with 15-30 cm steps
└── Obstacles: Automatic avoidance and step planning
```

## 5. Gait Pattern Generation Diagrams

### Walking Pattern Elements Visualization

**Diagram**: ![Diagram Placeholder](/img/placeholder.png)

```
Key Walking Pattern Components:
Joint Trajectories:
├── Hip: [Flexion/Extension] [Abduction/Adduction] [Rotation]
├── Knee: [Flexion/Extension] [Limited Rotation]
├── Ankle: [Dorsiflexion/Plantarflexion] [Inversion/Eversion]
└── Pelvis: [Lateral Tilt] [Forward Tilt] [Rotation]

CoM Trajectory Patterns:
Forward Progression: Sine wave with forward bias
Lateral Sway: Out-of-phase with step cycle
Vertical Oscillation: Minimal, energy-efficient pattern

Arm Swing Coordination:
├── Contralateral: Opposite arm swings with opposite leg
├── Amplitude: Proportional to walking speed
└── Phase: 180-degree phase difference from leg swing
```

### Dynamic Walking Patterns

**Diagram**: ![Diagram Placeholder](/img/placeholder.png)

```
Dynamic Walking Characteristics:
Limit Cycle Gait:
├── Periodic: Returns to same state after each step
├── Stable: Attracts to stable walking pattern
└── Efficient: Minimal control effort required

ZMP-Based Walking:
├── Reference: ZMP follows planned trajectory
├── Constraint: Always within support polygon
└── Control: Feedback maintains ZMP within bounds

Passive Dynamic Walking:
├── Energy Efficiency: Exploits natural dynamics
├── Minimal Actuation: Uses gravity and momentum
└── Limitations: Requires specific conditions
```

## 6. Terrain Adaptation Visualization

### Rough Terrain Walking Architecture

**Diagram**: ![Diagram Placeholder](/img/placeholder.png)

```
Multi-Terrain Walking System:
Perception Layer: [Vision] [LIDAR] [Tactile Sensors] [IMU]
     ↓
Terrain Classification: [Flat] [Rough] [Sloped] [Obstacles]
     ↓
Gait Adaptation: [Step Height] [Step Length] [Timing]
     ↓
Control Adjustment: [Balance Parameters] [Foot Trajectory]
     ↓
Execution: [Adapted Walking Pattern]

Terrain Classification Process:
Input: [Point Cloud] [Image Data] [Contact Feedback]
     ↓
Feature Extraction: [Surface Normal] [Roughness] [Friction]
     ↓
Classification: [Terrain Type] [Difficulty Level]
     ↓
Gait Selection: [Appropriate Walking Pattern]

Adaptation Strategies:
├── Flat Ground: Normal walking gait
├── Rough Terrain: Higher foot clearance, wider steps
├── Sloped Surface: Adjusted CoM position, step angles
└── Stairs: Specialized stair-climbing gait
```

### Stair Climbing Gait Planning

**Diagram**: ![Diagram Placeholder](/img/placeholder.png)

```
Stair Climbing Process:
Stair Detection: [Step Recognition] [Dimension Measurement]
     ↓
Gait Planning: [Approach] [Lift] [Place] [Transfer] [Lift] [Place]
     ↓
Execution: [Controlled Ascent/Descent]

Stair Climbing Phases:
Approach Phase: [Positioning] [Balance Preparation]
     ↓
Lift Phase: [Foot Lift] [Height Adjustment]
     ↓
Place Phase: [Foot Placement] [Surface Contact]
     ↓
Transfer Phase: [Weight Transfer] [Balance Recovery]
     ↓
Repeat: [Next Step] → [Continue Climbing]

Control Considerations:
├── Step Height: Match stair riser height
├── Step Depth: Accommodate stair tread depth
├── Balance: Maintain stability during transitions
└── Safety: Controlled movement, no falls
```

## 7. Balance and Stability Visualization

### Stability Margin Analysis

**Diagram**: ![Diagram Placeholder](/img/placeholder.png)

```
Stability Metrics Visualization:
Support Polygon: Convex hull of contact points
├── Single Support: Triangle under supporting foot
├── Double Support: Quadrilateral between both feet
└── Multi-Contact: Polygon with all contact points

Stability Margin: Distance from CoM projection to polygon edge
├── Positive Margin: Stable walking
├── Zero Margin: Boundary of stability
└── Negative Margin: Unstable, potential fall

ZMP Tracking Performance:
ZMP_reference vs ZMP_actual over time
    ↑
 0.5 |     Reference
     |    /
 0.0 |---●●●●●●●●●●●●●● Actual
-0.5 |____________________→ Time (s)
     0   1   2   3   4   5

CoM Projection: Within polygon = stable walking
    y
    ↑
    |    ● CoM
    |   /|\
    |  /_×_\
    | /     \
    |/       \
────+---------●────→ x
   Left foot  Right foot
```

### Disturbance Response Visualization

**Diagram**: ![Diagram Placeholder](/img/placeholder.png)

```
Balance Recovery Process:
Normal Walking: [Stable CoM] [Predictable ZMP] [Regular Steps]
     ↓
Disturbance: [External Force] [CoM Displacement] [ZMP Violation]
     ↓
Detection: [IMU Feedback] [ZMP Error] [Stability Assessment]
     ↓
Recovery: [Compensatory Motion] [Step Adjustment] [Balance Restore]

Recovery Strategies:
├── Ankle Strategy: Small disturbances, ankle torque adjustment
├── Hip Strategy: Moderate disturbances, hip movement
├── Step Strategy: Large disturbances, emergency step
└── Grasping: Human assistance, safety recovery

Response Timing:
├── 0-50ms: Ankle reflex response
├── 50-200ms: Hip strategy activation
├── 200-500ms: Step strategy planning
└── 500ms+: Grasping or fall mitigation
```

## 8. Multi-Modal Locomotion Diagrams

### Gait Transition Architecture

**Diagram**: ![Diagram Placeholder](/img/placeholder.png)

```
Multi-Modal Locomotion System:
Gait Selection: [Standing] [Walking] [Running] [Climbing]
     ↓
Transition Planning: [Smooth Transitions] [Stability Maintenance]
     ↓
Execution: [Adapted Control Parameters]

Gait Transition Process:
Standing → Walking: [Posture Adjustment] [Step Initiation] [Balance Transfer]
Walking → Running: [Speed Increase] [Aerial Phase Introduction] [Energy Management]
Running → Walking: [Speed Reduction] [Stability Focus] [Control Adjustment]
Walking → Stairs: [Recognition] [Gait Switch] [Parameter Adaptation]

Transition Constraints:
├── Stability: Maintain balance during transitions
├── Smoothness: Avoid jerky motion changes
├── Timing: Proper phase synchronization
└── Safety: Controlled transition execution
```

## 9. Real-Time Gait Adaptation

### Online Replanning Architecture

**Diagram**: ![Diagram Placeholder](/img/placeholder.png)

```
Real-Time Gait Adaptation System:
Perception: [Environment Changes] [Disturbances] [Terrain Changes]
     ↓
Detection: [Obstacle Recognition] [Stability Assessment] [Terrain Classification]
     ↓
Replanning: [Footstep Adjustment] [Gait Parameter Update] [Trajectory Modification]
     ↓
Execution: [Adapted Walking Pattern]

Adaptation Process:
Current Plan: [Pre-planned Steps] [Trajectory] [Timing]
     ↓
Environmental Change: [New Obstacle] [Terrain Change] [Disturbance]
     ↓
Replanning Trigger: [Replanning Condition Met]
     ↓
New Plan: [Updated Steps] [Modified Trajectory] [Revised Timing]
     ↓
Execution: [Adapted Walking]

Response Times:
├── 10-50ms: Joint-level adjustments
├── 50-200ms: Step timing adjustments
├── 200-500ms: Footstep replanning
└── 500ms-1s: Gait mode transitions
```

## 10. Exercises

### Beginner Level
1. **Gait Phase Diagram**: Draw the complete gait cycle for a humanoid robot, showing single support, double support, and swing phases with timing percentages.

2. **Support Polygon Visualization**: Sketch the support polygon for different walking phases (single support, double support) and show CoM position relative to the polygon.

### Intermediate Level
3. **Footstep Planning**: Design an A* search algorithm diagram for footstep planning in a 2D grid environment with obstacles, showing cost calculation and path optimization.

4. **Balance Control**: Create a block diagram showing the feedback control loop for ZMP-based balance control, including state estimation, reference generation, and control execution.

### Advanced Level
5. **Dynamic Replanning**: Develop a comprehensive diagram showing how a humanoid robot continuously replans its gait pattern when encountering unexpected obstacles during walking.

6. **Learning Architecture**: Design a diagram showing how a humanoid robot can learn to improve its gait patterns through experience, including data collection, learning algorithms, and integration with planning systems.

## 11. Summary

This section has provided comprehensive visualizations of key locomotion and gait planning concepts in humanoid robotics. The diagrams illustrate the complex relationships between different walking phases, the challenges of maintaining balance during locomotion, and the practical considerations for real-world implementation.

Understanding these visual representations is crucial for developing intuition about gait planning system behavior and for implementing effective walking controllers in humanoid robots. The case study of the ASIMO robot demonstrates how theoretical gait planning principles translate into practical implementations with real-world constraints and challenges.

The exercises provided offer opportunities to apply these concepts and develop deeper understanding of gait planning system design and implementation in humanoid robotics. The balance between computational efficiency, stability, and real-time performance remains a key challenge in the field, requiring careful system design and optimization.

The integration of perception, planning, and control systems creates opportunities for humanoid robots to achieve increasingly sophisticated and natural walking behaviors in complex environments. Future developments in this field will continue to advance the capabilities of humanoid robots in human environments.